<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chi Tiết Bài Báo - Báo Giấy Online</title>
    <link rel="stylesheet" href="../css/styles.css" />
    <link rel="stylesheet" href="../css/bootstrap.min.css" />
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/jquery-3.7.1.min.js"></script>
  </head>

  <body>
    <!-- Vị trí chèn header -->
    <header class="bg-primary text-white py-3">
      <div class="container d-flex justify-content-between align-items-center">
        <div class="logo d-flex align-items-center">
          <img
            src="../img/logo.png"
            alt="Logo Báo Giấy"
            class="me-2"
            style="width: 50px; height: 50px"
          />
          <h1 class="h4 mb-0">Báo Giấy Online</h1>
        </div>
        <form class="d-flex me-3">
          <input
            class="form-control me-2"
            type="search"
            placeholder="Tìm kiếm bài báo..."
            aria-label="Search"
          />
        </form>
        <nav>
          <ul class="nav">
            <li class="nav-item">
              <a class="nav-link text-white" href="index.html">Trang chủ</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-white" href="gioithieu.html"
                >Giới thiệu</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link text-white" href="danhmucbaogiay.html"
                >Danh mục báo</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link text-white" href="giohang.html">Giỏ Hàng</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-white" href="thanhtoan.html"
                >Thanh Toán</a
              >
            </li>
            <li class="nav-item">
              <span id="usernameDisplay" class="text-white ms-2"></span>
              <a href="login.html" id="loginButton" class="btn btn-light"
                >Đăng nhập</a
              >
            </li>
          </ul>
        </nav>
      </div>
    </header>
    <!-- Main Content -->
    <main class="container my-5">
      <h1 class="text-center">Chi Tiết Bài Báo</h1>
      <div class="card" data-id="1">
        <div class="card-body">
          <h3 class="card-title">Báo Thể Thao</h3>
          <p class="card-text">
            Chi tiết về bài báo thể thao, nội dung phong phú và thông tin hữu
            ích cho người đọc.
          </p>
          <p><strong>Giá:</strong> <span id="price">30000</span> VND</p>
          <button id="addToCart" class="btn btn-primary">
            Thêm vào giỏ hàng
          </button>
        </div>
      </div>
      <div class="card" data-id="2">
        <div class="card-body">
          <h3 class="card-title">Báo Du Lịch</h3>
          <p class="card-text">
            Chi tiết về bài báo du lịch, nội dung phong phú và thông tin hữu ích
            cho người đọc.
          </p>
          <p><strong>Giá:</strong> <span id="price">30000</span> VND</p>
          <button id="addToCart" class="btn btn-primary">
            Thêm vào giỏ hàng
          </button>
        </div>
      </div>
      <div class="card" data-id="3">
        <div class="card-body">
          <h3 class="card-title">Báo Sức Khỏe</h3>
          <p class="card-text">
            Chi tiết về bài báo sức khỏe, nội dung phong phú và thông tin hữu
            ích cho người đọc.
          </p>
          <p><strong>Giá:</strong> <span id="price">30000</span> VND</p>
          <button id="addToCart" class="btn btn-primary">
            Thêm vào giỏ hàng
          </button>
        </div>
      </div>
      <div class="card" data-id="4">
        <div class="card-body">
          <h3 class="card-title">Báo Kinh Doanh</h3>
          <p class="card-text">
            Chi tiết về bài báo kinh doanh, nội dung phong phú và thông tin hữu
            ích cho người đọc.
          </p>
          <p><strong>Giá:</strong> <span id="price">30000</span> VND</p>
          <button id="addToCart" class="btn btn-primary">
            Thêm vào giỏ hàng
          </button>
        </div>
      </div>
    </main>

    <!-- Vị trí chèn footer -->
    <div id="footer"></div>

    <!-- <script>
      // Thêm bài báo vào giỏ hàng
      document
        .getElementById("addToCart")
        .addEventListener("click", function () {
          const product = {
            name: "Báo Thể Thao",
            price: parseInt(document.getElementById("price").textContent),
            quantity: 1,
          };

          let cart = JSON.parse(localStorage.getItem("cart")) || [];
          cart.push(product);
          localStorage.setItem("cart", JSON.stringify(cart));

          alert("Sản phẩm đã được thêm vào giỏ hàng!");
        });

      // Tải header và footer
      function loadHTML(elementId, url) {
        fetch(url)
          .then((response) => response.text())
          .then(
            (data) => (document.getElementById(elementId).innerHTML = data)
          );
      }
      document.addEventListener("DOMContentLoaded", function () {
        loadHTML("header", "header.html");
        loadHTML("footer", "footer.html");
      });
    </script> -->
    <script>
      // Thêm bài báo vào giỏ hàng
      document.querySelectorAll("button#addToCart").forEach((button) => {
        button.addEventListener("click", function () {
          const card = this.closest(".card"); // Lấy thẻ cha gần nhất có class "card"
          const productId = card.getAttribute("data-id"); // Lấy giá trị data-id
          const productName = card.querySelector(".card-title").textContent; // Lấy tên sản phẩm
          const productPrice = parseInt(
            card.querySelector("#price").textContent
          ); // Lấy giá sản phẩm

          const product = {
            id: productId,
            name: productName,
            price: productPrice,
            quantity: 1,
          };

          let cart = JSON.parse(localStorage.getItem("cart")) || [];

          // Kiểm tra nếu sản phẩm đã tồn tại trong giỏ hàng
          const existingProduct = cart.find((item) => item.id === productId);
          if (existingProduct) {
            existingProduct.quantity += 1; // Tăng số lượng sản phẩm
          } else {
            cart.push(product); // Thêm sản phẩm mới
          }

          localStorage.setItem("cart", JSON.stringify(cart));

          alert("Sản phẩm đã được thêm vào giỏ hàng!");
        });
      });

      // Tải header và footer
      function loadHTML(elementId, url) {
        fetch(url)
          .then((response) => response.text())
          .then(
            (data) => (document.getElementById(elementId).innerHTML = data)
          );
      }

      document.addEventListener("DOMContentLoaded", function () {
        loadHTML("header", "header.html");
        loadHTML("footer", "footer.html");
      });
    </script>
    <script>
      (function () {
        // Kiểm tra trạng thái đăng nhập
        const isLoggedIn = localStorage.getItem("isLoggedIn") === "true";
        const username = localStorage.getItem("username");

        if (isLoggedIn && username) {
          // Hiển thị tên người dùng và ẩn nút đăng nhập
          document.getElementById(
            "usernameDisplay"
          ).textContent = `Xin chào, ${username}`;
          document.getElementById("loginButton").style.display = "none";
        }
      })();
    </script>
  </body>
</html>
